<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>高島易斷</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <main class="container">
      <img src="/assets/book-cover.png" alt="高島易斷" class="logo-img"/>
      <form class="row" id="gua-form">
        <select id="up-input">
          <option value="" disabled selected>上卦 :</option>
          <option value="1">1 ☰ 乾/天 (Qian/Heaven)</option>
          <option value="2">2 ☱ 兌/澤 (Dui/Lake)</option>
          <option value="3">3 ☲ 離/火 (Li/Fire)</option>
          <option value="4">4 ☳ 震/雷 (Zhen/Thunder)</option>
          <option value="5">5 ☴ 巽/風 (Xun/Wind)</option>
          <option value="6">6 ☵ 坎/水 (Kan/Water)</option>
          <option value="7">7 ☶ 艮/山 (Gen/Mountain)</option>
          <option value="8">8 ☷ 坤/地 (Kun/Earth)</option>
        </select>

        <select id="down-input">
          <option value="" disabled selected>下卦 :</option>
          <option value="1">1 ☰ 乾/天 (Qian/Heaven)</option>
          <option value="2">2 ☱ 兌/澤 (Dui/Lake)</option>
          <option value="3">3 ☲ 離/火 (Li/Fire)</option>
          <option value="4">4 ☳ 震/雷 (Zhen/Thunder)</option>
          <option value="5">5 ☴ 巽/風 (Xun/Wind)</option>
          <option value="6">6 ☵ 坎/水 (Kan/Water)</option>
          <option value="7">7 ☶ 艮/山 (Gen/Mountain)</option>
          <option value="8">8 ☷ 坤/地 (Kun/Earth)</option>
        </select>

        <select id="yao-input">
          <option value="" disabled selected>變爻 :</option>
          <option value="1">1 初爻</option>
          <option value="2">2 二爻</option>
          <option value="3">3 三爻</option>
          <option value="4">4 四爻</option>
          <option value="5">5 五爻</option>
          <option value="6">6 上爻</option>
        </select>
        <button type="submit" class="submit" id="submitButton">獲取斷語</button>
        <script>
          function checkFormValidity() {
            const upValue = document.getElementById('up-input').value;
            const downValue = document.getElementById('down-input').value;
            const yaoValue = document.getElementById('yao-input').value;
            
            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = !upValue || !downValue || !yaoValue;
          }

          document.getElementById('up-input').addEventListener('change', checkFormValidity);
          document.getElementById('down-input').addEventListener('change', checkFormValidity);
          document.getElementById('yao-input').addEventListener('change', checkFormValidity);

          // Call once on page load to set initial state
          checkFormValidity();
        </script>

      </form>
      <div id="result" class="result" style="display: none;">
        <h2 class="section">本卦</h2>
        <p><span id="unicode" class="hexagram"></span>
            <span id="name" class="hexagram"></span>
            （<span id="order" class="hexagramorder"></span>）</p>
        <p><div id="hexagram_guaci"></div></p>

        <hr>
        <h2 class="section">變爻</h2>
        <p><div id="hexagram_yaoci"></div></p>

        <hr>
        <h2 class="section">變卦</h2>
        <button onclick="toggleChangedHexagram()" class="fold-button" id="toggleButton">收起</button>
        <script>
          function toggleChangedHexagram() {
              const changedHexagramContent = document.getElementById('changedHexagramContent');
              const toggleButton = document.getElementById('toggleButton');
              if (changedHexagramContent.style.display === 'none') {
                  changedHexagramContent.style.display = 'block';
                  toggleButton.textContent = '收起';
              } else {
                  changedHexagramContent.style.display = 'none';
                  toggleButton.textContent = '展開';
              }
          }
        </script>
        <div id="changedHexagramContent">
        <p><span id="c_unicode" class="hexagram"></span>
            <span id="c_name" class="hexagram"></span>
            （<span id="c_order" class="hexagramorder"></span>）</p>
        <p><div id="c_hexagram_guaci"></div></p>
        </div>
      </div>
    </main>
  </body>
</html>
